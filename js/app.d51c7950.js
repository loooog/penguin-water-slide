(function(e){function t(t){for(var n,a,s=t[0],c=t[1],u=t[2],d=0,h=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(h.length)h.shift()();return o.push.apply(o,u||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,s=1;s<i.length;s++){var c=i[s];0!==r[c]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},o=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="//mikatalk.github.io/penguin-water-slide/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"0cb8":function(e,t){window["b2CircleShape"].prototype.draw=function(e,t){var i=this.position,n=new window["b2Vec2"](i.x,i.y);t.insertCircleVertices(e,this.radius,n.x,n.y,0,0,0,5)},window["b2PolygonShape"].prototype.draw=function(e,t){var i=3*t.currentVertex;t.transformVerticesAndInsert(this.vertices,e,0,0,0);var n=t.positions,r=3*(t.currentVertex-1);t.insertLine(n[r],n[r+1],n[i],n[i+1],0,0,0)}},"190a":function(e){e.exports=JSON.parse('{"a":{"type":"fromPhysicsEditor","label":"penguin","isStatic":false,"density":0.10000000149011612,"restitution":0,"friction":0.10000000149011612,"frictionAir":0.009999999776482582,"frictionStatic":0.5,"collisionFilter":{"group":0,"category":1,"mask":255},"fixtures":[{"label":"","isSensor":false,"vertices":[[{"x":1,"y":95},{"x":18,"y":88},{"x":27,"y":71},{"x":26,"y":56},{"x":3,"y":74}],[{"x":233,"y":19},{"x":198,"y":5},{"x":143,"y":18},{"x":79,"y":111},{"x":136,"y":111},{"x":219,"y":98},{"x":242,"y":59}],[{"x":143,"y":18},{"x":107,"y":0},{"x":69,"y":3},{"x":35,"y":29},{"x":26,"y":56},{"x":27,"y":71},{"x":42,"y":97},{"x":79,"y":111}]]}]}}')},"30b3":function(e,t,i){e.exports=i.p+"img/background.8eb8eaf1.png"},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{ref:"canvas-container",staticClass:"canvas-container"}),i("button",{on:{click:e.toggleCameraMode}},[e._v("Toggle Camera View - "+e._s(e.cameraMode))])])},o=[],a=(i("a4d3"),i("e01a"),i("d28b"),i("d3b7"),i("3ca3"),i("4c53"),i("ddb0"),i("d4ec")),s=i("bee2"),c=i("ade3"),u=i("5a89"),l=(i("0cb8"),window["b2World"]),d=(window["b2_tensileParticle"],window["b2_dynamicBody"]),h=window["b2PolygonShape"],v=window["b2CircleShape"],f=window["b2Vec2"],m=window["b2BodyDef"],p=window["b2ParticleSystemDef"],w=window["b2ParticleGroupDef"],y=(window["b2_waterParticle"],window["b2_colorMixingParticle"],window["b2MouseJointDef"]),g=window["b2AABB"],b=function(){function e(t){Object(a["a"])(this,e),this.point=t,this.fixture=null}return Object(s["a"])(e,[{key:"ReportFixture",value:function(e){var t=e.body;if(t.GetType()===d){var i=e.TestPoint(this.point);if(i)return this.fixture=e,!0}return!1}}]),e}(),x=function(e,t,i){return e*i+t*(1-i)},M=(i("ace4"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(){function e(){Object(a["a"])(this,e),Object(c["a"])(this,"initCircleVertices",(function(e,t){for(var i=360/t,n=0;n<t;n++){var r=n*i*Math.PI/180,o=(n+1)*i*Math.PI/180;e.push(Math.cos(r)),e.push(Math.sin(r)),e.push(Math.cos(o)),e.push(Math.sin(o))}})),Object(c["a"])(this,"transformAndInsert",(function(e,t,i,n,r,o){var a=new f,s=new f;f.Mul(a,i,e),f.Mul(s,i,t),this.insertLine(a.x,a.y,s.x,s.y,n,r,o)})),Object(c["a"])(this,"transformVerticesAndInsert",(function(e,t,i,n,r){for(var o=e.length,a=1;a<o;a++)this.transformAndInsert(e[a-1],e[a],t,i,n,r)})),this.maxVertices=500;var t=new u["b"];t.dynamic=!0,t.setAttribute("position",new u["a"](new Float32Array(3*this.maxVertices),3)),t.setAttribute("color",new u["a"](new Float32Array(3*this.maxVertices),3)),this.positions=t.attributes.position.array,this.colors=t.attributes.color.array,this.currentVertex=0,this.buffer=new u["h"](t,new u["g"]({vertexColors:!0}),u["h"]),this.circleVertices=[],this.circleResolution=10,this.initCircleVertices(this.circleVertices,this.circleResolution),this.particleVertices=[],this.particleResolution=3,this.initCircleVertices(this.particleVertices,this.particleResolution)}return Object(s["a"])(e,[{key:"collapseBuffer",value:function(){for(var e=3*this.currentVertex;e<3*this.maxVertices;e++)this.positions[e]=0,this.colors[e]=0}},{key:"draw",value:function(e){for(var t=e.bodies,i=0,n=t.length;i<n;i++)for(var r=t[i],o=r.fixtures.length,a=r.GetTransform(),s=0;s<o;s++){var c=r.fixtures[s];c.shape.draw(a,this)}this.collapseBuffer(),this.buffer.geometry.attributes.position.needsUpdate=!0,this.buffer.geometry.attributes.color.needsUpdate=!0}},{key:"insertLine",value:function(e,t,i,n,r,o,a){var s=this.currentVertex,c=3*s;this.positions[c]=e,this.positions[c+1]=t,this.positions[c+2]=0,this.colors[c]=r,this.colors[c+1]=o,this.colors[c+2]=a,s++,c=3*s,this.positions[c]=i,this.positions[c+1]=n,this.positions[c+2]=0,this.colors[c]=r,this.colors[c+1]=o,this.colors[c+2]=a,this.currentVertex+=2}},{key:"insertCircleVertices",value:function(e,t,i,n,r,o,a){for(var s=this.circleVertices,c=0;c<this.circleResolution;c++){var u=4*c,l=new f(s[u]*t+i,s[u+1]*t+n),d=new f(s[u+2]*t+i,s[u+3]*t+n);f.Mul(l,e,l),f.Mul(d,e,d),this.insertLine(l.x,l.y,d.x,d.y,r,o,a)}}},{key:"insertParticleVertices",value:function(e,t,i,n,r,o){for(var a=this.particleVertices,s=0;s<this.particleResolution;s++){var c=4*s,u=a[c]*e+t,l=a[c+1]*e+i,d=a[c+2]*e+t,h=a[c+3]*e+i;this.insertLine(u,l,d,h,n,r,o)}}}]),e}()),j=i("99de"),O=i("7e84"),k=i("262e"),S=.003921569,P="\n  precision highp float;\n\n  #define PI 3.1415926536\n  #define PI2 6.28318530718\n\n  attribute vec3 position;\n  attribute vec3 offset;\n  attribute vec4 color;\n  attribute float scale;\n  uniform mat4 modelViewMatrix;\n  uniform mat4 projectionMatrix;\n  uniform float time;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  varying vec4 vColor;\n  attribute float particleIndex;\n  uniform vec4 orientation;\n  \n  vec3 applyQuaternionToVector( vec4 q, vec3 v ){\n    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n  }\n\n  void main(){\n\n    vColor = color;\n    vec3 pos = position * vec3(scale, scale, 1.0);\n    pos = applyQuaternionToVector(orientation, pos);\n    pos = pos + offset;\n    vUv = vec2(uv.x, 1.0-uv.y);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0 );\n  }\n",L="\n  precision highp float;\n\n  varying vec4 vColor;\n  varying vec2 vUv;\n\n  float drawBase (in vec2 uv, in float min, in float max) {\n    float dist = sqrt(dot(uv, uv));\n    if (dist >= max || dist <= min) {\n      return 0.0;\n    }\n    float sm = smoothstep(max, max - 0.01, dist);\n    float sm2 = smoothstep(min, min - 0.01, dist);\n    float alpha = sm * sm2;\n    return (1.0-alpha);\n  }\n\n  void main() {\n    float alpha = drawBase(vUv - vec2(0.5), 0.0, 0.5);\n    // discard if not needed\n    if (alpha == 0.0) {\n      discard;\n    }\n    vec4 color = vColor;\n    color.a = alpha * max(0.0, 0.6 - sin(length(vUv - vec2(0.5)))) * 0.4;\n    gl_FragColor = clamp(vec4(0), vec4(1), color);\n  }\n",B=function(e){function t(e){var i,n=e.world;Object(a["a"])(this,t);var r=n.particleSystems[0].GetPositionBuffer().length/2,o=new u["f"];o.copy(new u["n"](1,1,1,1));for(var s=[],c=[],l=[],d=0;d<r;d+=1)s.push(0,0,0),c.push(0,0,0,0),l.push(.6);o.setAttribute("offset",new u["e"](new Float32Array(s),3)),o.setAttribute("color",new u["e"](new Float32Array(c),4)),o.setAttribute("scale",new u["e"](new Float32Array(l),1));var h=new u["q"]({uniforms:{time:{value:1},orientation:{type:"v4",value:new u["o"]}},vertexShader:P,fragmentShader:L,depthWrite:!1,side:u["d"],transparent:!0,alphaTest:.005,blending:u["k"]});return i=Object(j["a"])(this,Object(O["a"])(t).call(this,o,h)),i.numberOfParticles=r,i.frustumCulled=!1,i.resetBuffers(n),i}return Object(k["a"])(t,e),Object(s["a"])(t,[{key:"resetBuffers",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,o=e.particleSystems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)for(var a=r.value,s=a.GetPositionBuffer(),c=a.GetColorBuffer(),u=this.geometry.attributes.offset.array,l=this.geometry.attributes.color.array,d=0,h=0,v=0,f=s.length;d<f;d+=2,h+=3,v+=4)u[h]=0,u[h+1]=0,u[h+2]=0,l[v]=c[v]*S,l[v+1]=c[v+1]*S,l[v+2]=c[v+2]*S,l[v+3]=c[v+3]*S}catch(m){i=!0,n=m}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}this.geometry.attributes.offset.needsUpdate=!0,this.geometry.attributes.color.needsUpdate=!0}},{key:"draw",value:function(e){var t=!0,i=!1,n=void 0;try{for(var r,o=e.particleSystems[Symbol.iterator]();!(t=(r=o.next()).done);t=!0)for(var a=r.value,s=a.GetPositionBuffer(),c=a.GetVelocityBuffer(),u=this.geometry.attributes.offset.array,l=0,d=0,h=0,v=s.length;l<v;l+=2,d+=3,h+=4){var f=s[l+1];f<-25&&(s[l+0]=30*Math.random()-15,s[l+1]=30+2*Math.random(),c[l+0]=0,c[l+1]=0),u[d]=s[l],u[d+1]=s[l+1]}}catch(m){i=!0,n=m}finally{try{t||null==o.return||o.return()}finally{if(i)throw n}}this.geometry.attributes.offset.needsUpdate=!0}}]),t}(u["j"]),C=function(e){function t(){var e;Object(a["a"])(this,t),e=Object(j["a"])(this,Object(O["a"])(t).call(this,{antialias:!1,alpha:!0})),e.setClearColor(0,0),e.setSize(e.windowWidth,e.windowHeight),e.setPixelRatio(window.devicePixelRatio),e.shadowMap.enabled=!1;var i=e.getContext();if(!i.getExtension("OES_texture_float"))throw alert("client support error - float textures not supported"),new Error("float textures not supported");if(0===i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS))throw alert("client support error - vertex shader cannot read textures"),new Error("vertex shader cannot read textures");return e}return Object(k["a"])(t,e),t}(u["B"]),V=i("4478"),q=i("2909"),A=[[[-16,26],[-16,25],[10,20],[10,21]],[[19,21],[19,20],[5,12],[5,13]],[[0,14],[0,15],[5,13],[5,12]],[[-16,6.5],[-16,7.5],[-12,5],[-12,4]],[[-16,32],[-16,6.5],[-17,6.5],[-17,32]],[[-12,4],[-12,5],[8,5.5],[9,4.5]],[[22,25],[23,25],[19,4],[18,4]],[[19,4],[18,4],[7,0],[19,0]],[[0,-10],[-20,-9],[0,-8],[20,-9]]],E=i("190a"),F=function(){function e(t,i,n){Object(a["a"])(this,e);var r=new f(0,-10);this.world=new l(r);var o=new m;this.groundBody=this.world.CreateBody(o),window.world=this.world,this.makeWalls(),this.makeLiquidParticles(i,n),this.makePengiuns(t)}return Object(s["a"])(e,[{key:"makeWalls",value:function(){var e=new m,t=this.world.CreateBody(e),i=!0,n=!1,r=void 0;try{for(var o,a=A[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,c=new h,u=!0,l=!1,d=void 0;try{for(var v,p=s[Symbol.iterator]();!(u=(v=p.next()).done);u=!0){var w=v.value;c.vertices.push(Object(V["a"])(f,Object(q["a"])(w)))}}catch(y){l=!0,d=y}finally{try{u||null==p.return||p.return()}finally{if(l)throw d}}t.CreateFixtureFromShape(c,0)}}catch(y){n=!0,r=y}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"makeLiquidParticles",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[160,110,240,255],n=new p;n.radius=.07;var r=this.world.CreateParticleSystem(n),o=new v;o.position.Set(0,30),o.radius=t;var a=new w;a.shape=o,(e=a.color).Set.apply(e,Object(q["a"])(i)),r.CreateParticleGroup(a)}},{key:"makePengiuns",value:function(e){var t=E["a"].fixtures[0].vertices,i=.014,n=new m;n.type=d,n.sleep=!1;for(var r=0;r<e;r++){var o=this.world.CreateBody(n),a=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var v=u.value,p=new h,w=!0,y=!1,g=void 0;try{for(var b,x=v[Symbol.iterator]();!(w=(b=x.next()).done);w=!0){var M=b.value;p.vertices.push(new f(M.x*i,M.y*i))}}catch(j){y=!0,g=j}finally{try{w||null==x.return||x.return()}finally{if(y)throw g}}o.CreateFixtureFromShape(p,.5)}}catch(j){s=!0,c=j}finally{try{a||null==l.return||l.return()}finally{if(s)throw c}}o.childName="penguin-"+(r+1),o.SetTransform(new f(4*r-15,30),0),o.SetLinearVelocity(new f(0,0)),o.SetAngularVelocity(0)}}},{key:"destroy",value:function(){if(null!==this.world){while(this.world.joints.length>0)this.world.DestroyJoint(this.world.joints[0]);while(this.world.bodies.length>0)this.world.DestroyBody(this.world.bodies[0]);while(this.world.particleSystems.length>0)this.world.DestroyParticleSystem(this.world.particleSystems[0])}}}]),e}(),U=i("32d9"),D=i("360d"),z=i("93e9"),T={uniforms:{tDiffuse:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n      vec4 sample = texture2D(tDiffuse, vUv);\n      if (sample.a < 0.35) {\n        discard;\n      }\n      if (sample.a < 0.45) {\n        gl_FragColor = vec4(1.0);\n      } else {\n        gl_FragColor = sample;\n      }\n\t\t}\n  "},_=i("e9d2"),W={uniforms:{textureBackground:{type:"t",value:null},textureLiquid:{type:"t",value:null},tDiffuse:{type:"t",value:null}},vertexShader:"\n\t  varying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}\n\t",fragmentShader:"\n\n\t\tuniform sampler2D textureBackground;\n\t\tuniform sampler2D textureLiquid;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\t\t\tvec4 background = texture2D(textureBackground, vUv);\n\t\t\tvec4 liquid = texture2D(textureLiquid, vUv);\n\t\t\tvec4 foreground = texture2D(tDiffuse, vUv);\n\t\t\tvec3 color = background.rgb;\n\t\t\tcolor = mix(color.rgb, liquid.rgb, mix(liquid.a, foreground.a, 0.5));\n\t\t\tcolor = mix(color.rgb, foreground.rgb, foreground.a);\n\t\t\tfloat alpha = max(max(background.a, liquid.a), foreground.a);\n\t\t\tgl_FragColor = vec4(color, alpha);\n\t\t}\n\t"},J=(i("38cf"),function(e){function t(){Object(a["a"])(this,t);var e=(new u["w"]).load(i("b897"),(function(e){e.wrapT=u["r"],e.repeat.y=-1})),n=new u["v"]({map:e});return Object(j["a"])(this,Object(O["a"])(t).call(this,n))}return Object(k["a"])(t,e),Object(s["a"])(t,[{key:"draw",value:function(e){var t=e.GetWorldCenter(),i=e.GetAngle();t.y<-25&&(e.SetTransform(new f(0,30),0),e.SetLinearVelocity(new f(0,0)),e.SetAngularVelocity(0)),this.position.x=t.x,this.position.y=t.y;var n={width:243,height:111},r=.015;this.scale.set(n.width*r,n.height*r,1),this.material.rotation=i}}]),t}(u["u"])),R=function(){function e(t,n){var r=this;Object(a["a"])(this,e),Object(c["a"])(this,"settings",{liquidColor:[60,110,240,255],numberOfPenguins:6,spawnAreaRadius:4,debugPhysics:!1,velocityIterations:1,positionIterations:1}),Object(c["a"])(this,"leader",{name:"",position:{x:0,y:0}}),Object(c["a"])(this,"simulation",void 0),Object(c["a"])(this,"mouseJoint",void 0),Object(c["a"])(this,"renderer",void 0),Object(c["a"])(this,"composer",void 0),Object(c["a"])(this,"cameraMode","follow"),Object(c["a"])(this,"sceneBackground",void 0),Object(c["a"])(this,"sceneLiquid",void 0),Object(c["a"])(this,"sceneForeground",void 0),Object(c["a"])(this,"penguins",{}),Object(c["a"])(this,"liquidParticles",void 0),Object(c["a"])(this,"debugLayer",void 0),Object(c["a"])(this,"clock",void 0),Object(c["a"])(this,"paused",void 0),Object(c["a"])(this,"renderCallBack",void 0),Object(c["a"])(this,"loop",(function(){r.renderCallBack=requestAnimationFrame(r.loop),r.render()})),Object(c["a"])(this,"handleWindowResize",(function(){r.stageWidth=window.innerWidth,r.stageHeight=window.innerHeight,r.renderer.setSize(r.stageWidth,r.stageHeight),r.camera.aspect=r.stageWidth/r.stageHeight,r.camera.updateProjectionMatrix(),r.composerBackground.setSize(r.stageWidth,r.stageHeight),r.composerLiquid.setSize(r.stageWidth,r.stageHeight),r.composerForeground.setSize(r.stageWidth,r.stageHeight)})),Object(c["a"])(this,"handleMouseDown",(function(e){r.mouseJoint&&(r.simulation.world.DestroyJoint(r.mouseJoint),r.mouseJoint=null);var t=r.getMouseCoords(e),i=new g,n=new f;n.Set(.01,.01),f.Sub(i.lowerBound,t,n),f.Add(i.upperBound,t,n);var o=new b(t);if(r.simulation.world.QueryAABB(o,i),o.fixture){var a=o.fixture.body,s=new y;s.bodyA=r.simulation.groundBody,s.bodyB=a,s.target=t,s.maxForce=1e3*a.GetMass(),r.mouseJoint=r.simulation.world.CreateJoint(s),a.SetAwake(!0),r.targetToFollow=a}})),Object(c["a"])(this,"handleMouseMove",(function(e){if(r.mouseJoint){var t=r.getMouseCoords(e);r.mouseJoint.SetTarget(t)}})),Object(c["a"])(this,"handleMouseUp",(function(e){r.mouseJoint&&(r.simulation.world.DestroyJoint(r.mouseJoint),r.mouseJoint=null)})),this.container=t,this.cameraMode=n,this.clock=new u["c"],this.simulation=new F(this.settings.numberOfPenguins,this.settings.spawnAreaRadius,this.settings.liquidColor);var o=!0,s=!1,l=void 0;try{for(var d,h=this.simulation.world.bodies[Symbol.iterator]();!(o=(d=h.next()).done);o=!0){var v=d.value,m=v.childName;"penguin-4"===m&&(this.targetToFollow=v)}}catch(E){s=!0,l=E}finally{try{o||null==h.return||h.return()}finally{if(s)throw l}}this.renderer=new C,this.camera=new u["m"](70,window.innerWidth/window.innerHeight,.001,50),this.sceneBackground=new u["s"],this.sceneLiquid=new u["s"],this.sceneForeground=new u["s"],this.container.appendChild(this.renderer.domElement),this.liquidParticles=new B(this.simulation),this.sceneLiquid.add(this.liquidParticles),this.settings.debugPhysics&&(this.debugLayer=new M,this.sceneForeground.add(this.debugLayer.buffer));var p=(new u["w"]).load(i("30b3")),w=new u["v"]({map:p});this.background=new u["u"](w),this.sceneBackground.add(this.background);var x=40;this.background.position.x=3,this.background.position.y=11,this.background.position.z=-1,this.background.scale.set(x,x,x);var j=new z["a"](this.sceneBackground,this.camera),O=new z["a"](this.sceneLiquid,this.camera),k=new z["a"](this.sceneForeground,this.camera),S=new D["a"](_["a"]);this.effectLiquid=new D["a"](T);var P=new D["a"](_["a"]),L=new D["a"](W);this.composerBackground=new U["a"](this.renderer),this.composerBackground.addPass(j),this.composerBackground.addPass(S),this.composerLiquid=new U["a"](this.renderer),this.composerLiquid.addPass(O),this.composerLiquid.addPass(this.effectLiquid),this.composerLiquid.addPass(P),this.composerForeground=new U["a"](this.renderer),this.composerForeground.addPass(k),this.composerForeground.addPass(L),L.uniforms.textureBackground.value=this.composerBackground.renderTarget1.texture,L.uniforms.textureLiquid.value=this.composerLiquid.renderTarget1.texture,L.renderToScreen=!0;for(var V=0;V<this.settings.numberOfPenguins;V+=1){var q="penguin-".concat(V+1),A=new J;this.penguins[q]=A,this.sceneForeground.add(A)}this.addListeners(),this.handleWindowResize(),this.loop()}return Object(s["a"])(e,null,[{key:"initialize",value:function(t,i){e.instance||(e.instance=new e(t,i))}},{key:"destroy",value:function(){e.instance&&e.instance.destroy()}},{key:"setcameraMode",value:function(t){e.instance&&e.instance.setcameraMode(t)}}]),Object(s["a"])(e,[{key:"setcameraMode",value:function(e){this.cameraMode=e}},{key:"render",value:function(){if(!this.paused){if("follow"===this.cameraMode&&this.targetToFollow){var e=this.targetToFollow.GetTransform().p;this.camera.position.x=x(this.camera.position.x,e.x,.8),this.camera.position.y=x(this.camera.position.y,e.y,.8),this.camera.position.z=x(this.camera.position.z,11,.8)}else this.camera.position.x=x(this.camera.position.x,3,.98),this.camera.position.y=x(this.camera.position.y,11,.98),this.camera.position.z=x(this.camera.position.z,28,.98);this.clock.elapsedTime;var t=this.clock.getDelta();this.simulation.world.Step(Math.min(.03,t),this.settings.velocityIterations,this.settings.positionIterations),this.settings.debugPhysics&&(this.debugLayer.currentVertex=0,this.debugLayer.draw(this.simulation.world)),this.liquidParticles.draw(this.simulation.world);var i=!0,n=!1,r=void 0;try{for(var o,a=this.simulation.world.bodies[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value,c=s.childName;c&&c in this.penguins&&this.penguins[c].draw(s)}}catch(u){n=!0,r=u}finally{try{i||null==a.return||a.return()}finally{if(n)throw r}}this.renderer.clear(),this.composerBackground.render(),this.composerLiquid.render(),this.composerForeground.render()}}},{key:"getMouseCoords",value:function(e){var t,i,n=e.touches,r=this.renderer.domElement.getBoundingClientRect(),o=r.top,a=r.left;n&&n.length?(t=n[0].clientX-a,i=n[0].clientY-o):(t=e.clientX-a,i=e.clientY-o);var s=new u["z"];s.x=t/this.stageWidth*2-1,s.y=-i/this.stageHeight*2+1,s.z=.5,s.unproject(this.camera);var c=s.sub(this.camera.position).normalize(),l=-this.camera.position.z/c.z,d=this.camera.position.clone().add(c.multiplyScalar(l));return new f(d.x,d.y)}},{key:"destroy",value:function(){window.cancelAnimationFrame(this.renderCallBack),this.simulation.destroy(),this.removeListeners()}},{key:"addListeners",value:function(){document.addEventListener("touchstart",this.handleMouseDown,!1),document.addEventListener("touchmove",this.handleMouseMove,!1),document.addEventListener("touchend",this.handleMouseUp,!1),document.addEventListener("touchcancel",this.handleMouseUp,!1),document.addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),document.addEventListener("mouseout",this.handleMouseUp,!1),window.addEventListener("resize",this.handleWindowResize,!1)}},{key:"removeListeners",value:function(){document.removeEventListener("touchstart",this.handleMouseDown),document.removeEventListener("touchmove",this.handleMouseMove),document.removeEventListener("touchend",this.handleMouseUp),document.removeEventListener("touchcancel",this.handleMouseUp),document.removeEventListener("mousedown",this.handleMouseDown),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mouseout",this.handleMouseUp),window.removeEventListener("resize",this.handleWindowResize)}}]),e}();Object(c["a"])(R,"instance",null);var I={name:"App",data:function(){return{cameraMode:"full"}},mounted:function(){R.initialize(this.$refs["canvas-container"],this.cameraMode)},beforeDestroy:function(){R.destroy()},methods:{toggleCameraMode:function(){this.cameraMode="follow"===this.cameraMode?"full":"follow",R.setcameraMode(this.cameraMode)}}},G=I,H=(i("5c0b"),i("2877")),N=Object(H["a"])(G,r,o,!1,null,null,null),X=N.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(X)}}).$mount("#app");var Q=function(){var e=window.innerWidth,t=.75*e;try{window.parent.postMessage({"event-type":"iframe-content-resize",width:e,height:t},document.location.origin)}catch(i){}};Q(),window.addEventListener("resize",Q)},"5c0b":function(e,t,i){"use strict";var n=i("9c0c"),r=i.n(n);r.a},"9c0c":function(e,t,i){},b897:function(e,t,i){e.exports=i.p+"img/penguin.d1a92372.png"}});
//# sourceMappingURL=app.d51c7950.js.map